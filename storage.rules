rules_version = '2';

// Firebase Storage Security Rules for Transaction Images
// デモアプリ用の設定（認証なしでアクセス可能）
service firebase.storage {
  match /b/{bucket}/o {
    // 従来のトランザクション画像（既存機能維持）
    match /transactions/{transactionId}/images/{imageId} {
      // 読み取り・書き込み: 全ユーザー許可（デモアプリのため）
      allow read, write: if true;
    }
    
    // 現場ベーストランザクション画像
    match /site-transactions/{siteTransactionId}/images/{imageId} {
      // 読み取り・書き込み: 全ユーザー許可（デモアプリのため）
      allow read, write: if true;
    }
    
    // 現場関連の画像（ロゴ、写真等）
    match /sites/{siteId}/images/{imageId} {
      // 読み取り・書き込み: 全ユーザー許可（デモアプリのため）
      allow read, write: if true;
    }
    
    // 日記帳の画像
    match /site-diaries/{diaryId}/images/{imageId} {
      // 読み取り・書き込み: 全ユーザー許可（デモアプリのため）
      allow read, write: if true;
    }
    
    // 日記帳の書類
    match /site-diaries/{diaryId}/documents/{documentId} {
      // 読み取り・書き込み: 全ユーザー許可（デモアプリのため）
      allow read, write: if true;
    }
    
    // 接続テスト用（一時的）
    match /test/{testFile} {
      allow read, write: if true;
    }
    
    // 全体的な緩い設定（デモアプリ用の一時的設定）
    match /{allPaths=**} {
      allow read, write: if true;
    }
  }
}

// 注意: この設定はデモアプリ用です
// 本番環境では適切な認証・認可ルールを設定してください
