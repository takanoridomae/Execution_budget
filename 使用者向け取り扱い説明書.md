# 実行予算管理システム 使用者向け取り扱い説明書

## 目次

1. [はじめに](#はじめに)
2. [システム概要](#システム概要)
3. [基本操作](#基本操作)
4. [現場管理](#現場管理)
5. [カテゴリー管理](#カテゴリー管理)
6. [収支入力](#収支入力)
7. [ダッシュボード](#ダッシュボード)
8. [レポート機能](#レポート機能)
9. [ファイル管理](#ファイル管理)
10. [オフライン機能](#オフライン機能)
11. [よくある質問](#よくある質問)
12. [トラブルシューティング](#トラブルシューティング)

---

## はじめに

### 本システムについて
実行予算管理システムは、建設業界における現場単位での予算管理・コスト追跡・収支管理を効率化するためのWebアプリケーションです。

### 対象ユーザー
- 建設現場の管理者
- 予算管理担当者
- 複数現場を統括する管理者

### 推奨環境
- **ブラウザ**: Chrome、Firefox、Safari（最新2バージョン）
- **デバイス**: PC、タブレット、スマートフォン
- **インターネット接続**: 推奨（オフライン機能もあり）

---

## システム概要

### 主要機能
1. **現場管理**: 建設現場の情報管理
2. **カテゴリー管理**: 現場別の支出カテゴリー設定
3. **収支入力**: 収入・支出の記録と管理
4. **ダッシュボード**: 統計情報とリアルタイム状況表示
5. **レポート**: 分析とグラフによる可視化
6. **ファイル管理**: 画像・書類の添付と管理

### 画面構成
- **ホーム**: カレンダーと取引入力
- **ダッシュボード**: 統計表示と現場選択
- **レポート**: グラフと詳細分析
- **現場管理**: 現場情報のCRUD操作
- **カテゴリー管理**: 現場別カテゴリー設定

---

## 基本操作

### システムへのアクセス
1. Webブラウザを開く
2. システムのURLにアクセス
3. システムが自動的に読み込まれます

### ナビゲーション
#### サイドバーメニュー
- **ホーム**: メイン画面（カレンダー・取引入力）
- **ダッシュボード**: 統計表示
- **レポート**: 分析画面
- **現場管理**: 現場情報管理
- **カテゴリー管理**: カテゴリー設定

#### モバイル操作
- **ハンバーガーメニュー**: 画面左上の三本線アイコンをタップ
- **スワイプ操作**: 画面を左右にスワイプしてナビゲーション

### 基本的な入力操作
#### 数値入力
- 金額入力には専用の数値入力フィールドを使用
- カンマ区切りが自動で挿入されます
- 負の値は入力できません

#### 日付選択
- カレンダーアイコンをクリックして日付を選択
- 手動入力も可能（YYYY-MM-DD形式）

---

## 現場管理

### 現場の登録
1. サイドバーの「現場管理」をクリック
2. 画面右上の「新規追加」ボタンをクリック
3. 現場情報を入力：
   - **現場名**: 必須項目
   - **説明**: 現場の詳細説明（任意）
   - **コメント**: 備考欄（任意）
   - **稼働状況**: アクティブ/非アクティブを選択
4. 必要に応じて画像・書類を添付
5. 「保存」ボタンをクリック

### 現場情報の編集
1. 現場一覧から編集したい現場の「編集」ボタンをクリック
2. 必要な項目を修正
3. 「保存」ボタンで変更を確定

### 現場の削除
1. 削除したい現場の「削除」ボタンをクリック
2. 確認ダイアログで「削除」を選択
3. **注意**: 削除すると関連するすべてのデータが削除されます

### 現場の選択
1. ダッシュボードで目的の現場を選択
2. 選択状態はブラウザに保存され、次回アクセス時も継続されます

---

## カテゴリー管理

### カテゴリーの設定
1. 「カテゴリー管理」画面にアクセス
2. 対象の現場を選択
3. 「新規カテゴリー追加」をクリック
4. カテゴリー情報を入力：
   - **カテゴリー名**: 必須（例：材料費、人件費、機械損料）
   - **説明**: カテゴリーの詳細（任意）
   - **予算金額**: 月間予算額を設定
   - **コメント**: 備考欄（任意）
5. 「保存」ボタンで登録完了

### 予算の設定
1. 各カテゴリーの予算金額を入力
2. 年月単位での予算管理が可能
3. 予算使用状況はリアルタイムで表示されます

### カテゴリーの有効/無効切り替え
- 不要になったカテゴリーは削除せずに「非アクティブ」に設定
- 過去のデータとの整合性を保ちながら管理できます

---

## 収支入力

### 基本的な入力手順
1. ホーム画面でカレンダーから日付を選択
2. 画面下部の入力フォームを使用
3. タブで「収入」または「支出」を選択

### 収入の入力
1. 「収入」タブを選択
2. 以下の情報を入力：
   - **現場**: プルダウンから選択
   - **金額**: 収入金額を入力
   - **内容**: 収入の詳細説明
   - **カテゴリー**: 自動的に「売上」が設定
3. 必要に応じて証憑画像・書類を添付
4. 「保存」ボタンで登録

### 支出の入力
1. 「支出」タブを選択
2. 以下の情報を入力：
   - **現場**: プルダウンから選択
   - **カテゴリー**: 支出カテゴリーを選択
   - **金額**: 支出金額を入力
   - **内容**: 支出の詳細説明
3. 必要に応じて証憑画像・書類を添付
4. 「保存」ボタンで登録

### 入力の注意点
- **必須項目**: 現場、金額、内容、カテゴリー（支出の場合）
- **金額の上限**: 1億円未満まで入力可能
- **文字数制限**: 内容は500文字以内
- **ファイル制限**: 画像・書類は1ファイル10MB以下

### 取引の編集・削除
1. カレンダーで該当日をクリック
2. 取引一覧から編集/削除したい項目を選択
3. 「編集」または「削除」ボタンをクリック
4. 編集の場合は変更後「保存」、削除の場合は確認後「削除」

---

## ダッシュボード

### 統計情報の見方
#### 全体統計カード
- **稼働現場数**: アクティブな現場の数
- **総予算金額**: 全現場の予算合計
- **支出件数**: 登録されている支出の総件数
- **総支出金額**: 全現場の支出合計

#### 現場別統計
- **現場毎の予算**: 設定された予算金額
- **収入**: 現場毎の売上合計
- **支出**: 現場毎の支出合計
- **予算使用率**: 支出金額÷予算金額×100

### 現場選択機能
1. 現場一覧から目的の現場をクリック
2. 選択した現場の詳細情報が表示
3. 以降の操作は選択した現場が基準となります

### 現場詳細表示
選択した現場について以下の情報を表示：
- 現場基本情報
- カテゴリー一覧と使用状況
- 添付ファイル一覧
- 収支サマリー

---

## レポート機能

### レポートの種類
#### 現場別レポート
- 選択した現場の詳細な収支分析
- 期間指定での集計
- カテゴリー別支出内訳
- 予算対比グラフ

#### 全体レポート
- 全現場の総合分析
- 現場間の比較
- 月次・年次集計
- トレンド分析

### グラフの見方
#### 円グラフ
- カテゴリー別支出の割合
- 色分けによる視覚的な把握

#### 棒グラフ
- 期間別の収支推移
- 現場間の比較
- 予算と実績の対比

#### 線グラフ
- 時系列での変化
- トレンドの把握

### レポートの活用方法
1. **予算管理**: 予算使用率の監視
2. **コスト分析**: カテゴリー別支出の分析
3. **現場比較**: 効率性の比較検討
4. **トレンド把握**: 時系列での変化の確認

---

## ファイル管理

### 対応ファイル形式
#### 画像ファイル
- **形式**: JPEG、PNG、WebP
- **サイズ制限**: 10MB以下
- **自動処理**: 600x400pxに自動リサイズ、品質70%に圧縮

#### 書類ファイル
- **形式**: PDF、Word、Excel、PowerPoint、画像
- **サイズ制限**: 10MB以下
- **プレビュー**: ブラウザ内表示またはダウンロード

### ファイルの添付方法
1. 各入力フォームの「ファイル添付」エリアをクリック
2. ファイル選択ダイアログから目的のファイルを選択
3. 複数ファイルの同時選択も可能
4. プレビューで内容を確認
5. 不要なファイルは「削除」ボタンで除去

### ストレージの仕組み
#### ハイブリッドストレージ
- **Firebase Storage**: クラウド保存（同期・共有用）
- **LocalStorage**: ローカル保存（高速アクセス用）
- **自動同期**: オンライン時に自動でクラウドと同期

#### ストレージ整合性チェック
- システムが自動的にローカルとクラウドの整合性をチェック
- 不整合検出時は自動修復機能が動作
- ストレージ使用量の監視機能

---

## オフライン機能

### PWA（Progressive Web App）機能
1. **インストール**: ブラウザの「ホーム画面に追加」でアプリ化
2. **オフライン利用**: インターネット接続なしでも基本機能が利用可能
3. **自動同期**: オンライン復帰時に自動でデータを同期

### オフライン時の制限
#### 利用可能な機能
- データの閲覧（ローカルに保存済みのもの）
- 新規データの入力（ローカル保存）
- 既存データの編集

#### 制限される機能
- リアルタイム同期
- 他デバイスとのデータ共有
- クラウドへの画像・書類アップロード

### オンライン復帰時の動作
1. 自動的にインターネット接続を検知
2. ローカルに保存されたデータをクラウドに同期
3. 最新データをクラウドから取得
4. 整合性チェックを実行

---

## よくある質問

### Q1: システムにアクセスできません
**A**: 以下を確認してください：
- インターネット接続が正常か
- 使用しているブラウザが推奨環境か
- JavaScriptが有効になっているか

### Q2: データが消えてしまいました
**A**: 以下の手順で復旧を試してください：
1. ブラウザを再読み込み（F5キー）
2. 他のデバイスからアクセスして同期確認
3. それでも解決しない場合は管理者に連絡

### Q3: 画像がアップロードできません
**A**: 以下を確認してください：
- ファイルサイズが10MB以下か
- 対応形式（JPEG、PNG、WebP）か
- インターネット接続が安定しているか

### Q4: 予算設定が反映されません
**A**: 以下を確認してください：
- 現場が正しく選択されているか
- カテゴリーがアクティブ状態か
- 年月設定が正しいか

### Q5: モバイルでの操作が難しいです
**A**: 以下の機能をご活用ください：
- 画面を横向きにする
- タッチ操作でのスワイプナビゲーション
- 拡大・縮小機能（ピンチ操作）

### Q6: 複数のデバイスで同じデータを見たいです
**A**: インターネット接続があれば自動的に同期されます：
- 同じブラウザでアクセス
- データ入力後、しばらく待って同期完了を確認
- 他のデバイスでブラウザを再読み込み

---

## トラブルシューティング

### よくある問題と解決方法

#### 1. 画面が正しく表示されない
**症状**: レイアウトが崩れる、ボタンが押せない
**解決方法**:
1. ブラウザを最新版に更新
2. ブラウザのキャッシュをクリア
3. 別のブラウザで試す
4. デバイスを再起動

#### 2. データが同期されない
**症状**: 他のデバイスでデータが表示されない
**解決方法**:
1. インターネット接続を確認
2. 両方のデバイスでブラウザを再読み込み
3. しばらく時間を置いて再確認
4. ストレージ整合性チェックを実行

#### 3. ファイルアップロードに失敗する
**症状**: 画像や書類が添付できない
**解決方法**:
1. ファイルサイズを確認（10MB以下）
2. ファイル形式を確認
3. インターネット接続を確認
4. ブラウザのローカルストレージ容量を確認

#### 4. 動作が遅い
**症状**: 画面の切り替えや操作に時間がかかる
**解決方法**:
1. 他のブラウザタブを閉じる
2. 不要なアプリケーションを終了
3. ブラウザのキャッシュをクリア
4. デバイスの再起動

#### 5. 入力データが保存されない
**症状**: 入力したデータが反映されない
**解決方法**:
1. 必須項目がすべて入力されているか確認
2. 金額や文字数の制限を確認
3. エラーメッセージがないか確認
4. インターネット接続を確認

### エラーメッセージの対処法

#### 「接続エラー」
- インターネット接続を確認
- しばらく時間を置いて再試行
- VPNを使用している場合は一時的に無効化

#### 「ストレージ容量不足」
- ブラウザのローカルストレージをクリア
- 不要な画像・書類を削除
- 古いデータのバックアップ後削除

#### 「入力値エラー」
- エラーメッセージの内容を確認
- 入力形式を正しい形式に修正
- 必須項目の入力漏れを確認

### 緊急時の対応

#### データが消失した場合
1. **即座に操作を停止**
2. 他のデバイスでデータが残っているか確認
3. ブラウザの履歴やキャッシュから復旧を試行
4. 管理者に緊急連絡

#### システムが停止した場合
1. 別のデバイスでアクセス可能か確認
2. インターネット接続の問題か判断
3. オフライン機能でのデータ入力継続
4. 管理者への報告

### 定期的なメンテナンス

#### 推奨する定期作業
1. **週1回**: ブラウザキャッシュのクリア
2. **月1回**: データの整合性確認
3. **月1回**: 不要ファイルの整理
4. **四半期**: システム全体のデータバックアップ確認

---

## 付録

### システム要件
- **ブラウザ**: Chrome 90+、Firefox 88+、Safari 14+
- **JavaScript**: 必須（有効化必要）
- **ローカルストレージ**: 100MB以上の空き容量推奨
- **インターネット**: 同期機能に必要（オフライン利用も可能）

### 更新履歴
- **v1.0** (2025年9月19日): 初版リリース

### 連絡先
システムに関するお問い合わせは、システム管理者までご連絡ください。

---

**作成日**: 2025年9月19日  
**バージョン**: 1.0  
**対象システム**: 実行予算管理システム v1.0  

*この取り扱い説明書は、システムの更新に合わせて随時改訂されます。最新版の確認をお願いします。*
