rules_version = '2';

// Firestore Security Rules for Site-based Budget Management
service cloud.firestore {
  match /databases/{database}/documents {
    
    // 従来のTransactionsコレクション - 既存機能維持
    match /Transactions/{document} {
      allow read, write: if true; // デモアプリのため全許可
    }
    
    // 新しい現場管理コレクション
    match /Sites/{siteId} {
      allow read, write: if true; // デモアプリのため全許可
      
      // サブコレクションとして将来的に拡張可能
      match /metadata/{document} {
        allow read, write: if true;
      }
    }
    
    // 現場カテゴリーコレクション
    match /SiteCategories/{categoryId} {
      allow read, write: if true; // デモアプリのため全許可
    }
    
    // 現場ベーストランザクションコレクション（従来互換性のため維持）
    match /SiteTransactions/{transactionId} {
      allow read, write: if true; // デモアプリのため全許可
    }
    
    // 現場別収入コレクション
    match /SiteIncomes/{incomeId} {
      allow read, write: if true; // デモアプリのため全許可
    }
    
    // 現場別支出コレクション
    match /SiteExpenses/{expenseId} {
      allow read, write: if true; // デモアプリのため全許可
    }
    
    // 現場別予算設定コレクション
    match /SiteBudgetSettings/{budgetId} {
      allow read, write: if true; // デモアプリのため全許可
    }
    
    // システム管理用コレクション（将来的な拡張）
    match /SystemSettings/{document} {
      allow read: if true;
      allow write: if true; // デモアプリのため全許可
    }
    
    // その他のコレクションはアクセス拒否
    match /{document=**} {
      allow read, write: if false;
    }
  }
}

// 注意: 本番環境では適切な認証・認可ルールを設定してください
// 現在のルールはデモアプリ用の設定です
