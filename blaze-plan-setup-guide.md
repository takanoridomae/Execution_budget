# ğŸš€ Firebase Blazeãƒ—ãƒ©ãƒ³è¨­å®šã‚¬ã‚¤ãƒ‰ï¼ˆãƒ‡ãƒã‚¤ã‚¹é–“åŒæœŸå¯¾å¿œï¼‰

## ğŸ“‹ ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹é †

### 1. Blazeãƒ—ãƒ©ãƒ³ã¸ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰

1. [Firebase Console](https://console.firebase.google.com/)ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€Œkumakkoholdtypescriptã€ã‚’é¸æŠ
3. å·¦ä¸‹ã®ã€Œãƒ—ãƒ©ãƒ³ã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
4. **Blazeãƒ—ãƒ©ãƒ³ï¼ˆå¾“é‡èª²é‡‘åˆ¶ï¼‰**ã‚’é¸æŠ
5. æ”¯æ‰•ã„æ–¹æ³•ã‚’è¨­å®š
6. ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å®Œäº†

### 2. Firebase Storageè¨­å®š

#### â­ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«è¨­å®šï¼ˆé‡è¦ï¼‰

1. Firebase Console â†’ **Storage** â†’ **Rules**ã‚¿ãƒ–
2. ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆï¼š

```javascript
rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    // Transaction images - èª­ã¿æ›¸ãè¨±å¯
    match /transactions/{transactionId}/images/{imageId} {
      // èª­ã¿å–ã‚Š: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨±å¯
      allow read: if true;
      
      // æ›¸ãè¾¼ã¿: ãƒ•ã‚¡ã‚¤ãƒ«åˆ¶é™ä»˜ãã§è¨±å¯
      allow write: if request.resource != null
        && request.resource.size < 10 * 1024 * 1024  // 10MBä»¥ä¸‹
        && request.resource.contentType.matches('image/.*') // ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿
        && transactionId.matches('[a-zA-Z0-9]+'); // è‹±æ•°å­—ã®IDã®ã¿
    }
    
    // Test files - æ¥ç¶šãƒ†ã‚¹ãƒˆç”¨ï¼ˆè‡ªå‹•å‰Šé™¤ï¼‰
    match /test/{testFile} {
      allow read, write: if true;
    }
    
    // ãã®ä»–ã®ãƒ‘ã‚¹ã¯ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦
    match /{allPaths=**} {
      allow read, write: if false;
    }
  }
}
```

3. **ã€Œå…¬é–‹ã€**ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

#### ğŸ’³ èª²é‡‘ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šï¼ˆæ¨å¥¨ï¼‰

1. Firebase Console â†’ **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š** â†’ **ä½¿ç”¨é‡**
2. **äºˆç®—ã‚¢ãƒ©ãƒ¼ãƒˆ**ã‚’è¨­å®š
   - æœˆé¡ä¸Šé™: **Â¥500-1000**ç¨‹åº¦ã‚’æ¨å¥¨
   - ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š: 80%ã§é€šçŸ¥

### 3. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‹•ä½œç¢ºèª

#### âœ… ç¢ºèªé …ç›®

1. **Firebase Storageæ¥ç¶šãƒ†ã‚¹ãƒˆ**
   ```
   ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªï¼š
   ğŸ” Firebase Storageæ¥ç¶šãƒ†ã‚¹ãƒˆä¸­...
   âœ… Firebase Storageæ¥ç¶šæˆåŠŸ
   â˜ï¸ Firebase Storageå„ªå…ˆãƒ¢ãƒ¼ãƒ‰ï¼ˆBlazeãƒ—ãƒ©ãƒ³ãƒ»ãƒ‡ãƒã‚¤ã‚¹é–“åŒæœŸå¯¾å¿œï¼‰
   ```

2. **ç”»åƒä¿å­˜ãƒ†ã‚¹ãƒˆ**
   - ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ç”»åƒã‚’ä¿å­˜
   - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: `(ã‚¯ãƒ©ã‚¦ãƒ‰ä¿å­˜ãƒ»ãƒ‡ãƒã‚¤ã‚¹é–“åŒæœŸå¯¾å¿œ)`
   - PCã§åŒã˜å–å¼•ã‚’ç¢ºèª â†’ ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã‚‹

3. **ãƒ‡ãƒã‚¤ã‚¹é–“åŒæœŸç¢ºèª**
   - ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ â†’ ç”»åƒè¿½åŠ 
   - PC â†’ åŒã˜ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã‚‹
   - PC â†’ ç”»åƒè¿½åŠ   
   - ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ â†’ åŒã˜ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã‚‹

## ğŸ’° æ–™é‡‘ç›®å®‰

### æƒ³å®šä½¿ç”¨é‡ï¼ˆå®¶è¨ˆç°¿ã‚¢ãƒ—ãƒªï¼‰

| é …ç›® | æœˆé–“ä½¿ç”¨é‡ | æ–™é‡‘ |
|------|------------|------|
| **Storageå®¹é‡** | 1-2GB | ç´„Â¥26-52 |
| **ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰** | 0.5GB | ç´„Â¥60 |
| **ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰** | 1000å› | ç´„Â¥0.4 |
| **åˆè¨ˆ** | - | **ç´„Â¥100-150/æœˆ** |

### å®Ÿéš›ã®å®¶è¨ˆç°¿ä½¿ç”¨ã§ã®æƒ³å®š

- **è»½ã„ä½¿ç”¨**: æœˆÂ¥50-100
- **æ™®é€šã®ä½¿ç”¨**: æœˆÂ¥100-200
- **ãƒ˜ãƒ“ãƒ¼ä½¿ç”¨**: æœˆÂ¥200-500

## ğŸ› ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼
**ç—‡çŠ¶**: `storage/unauthorized` ã‚¨ãƒ©ãƒ¼
**è§£æ±º**: ä¸Šè¨˜ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### å•é¡Œ2: æ¥ç¶šãƒ†ã‚¹ãƒˆå¤±æ•—
**ç—‡çŠ¶**: `Firebase Storageæ¥ç¶šå¤±æ•—` ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
**è§£æ±º**: 
1. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šç¢ºèª
2. Firebase Console ã§StorageãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª
3. ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢

### å•é¡Œ3: èª²é‡‘ãŒå¿ƒé…
**è§£æ±º**: 
1. Firebase Console ã§ä½¿ç”¨é‡ã‚’å®šæœŸç¢ºèª
2. äºˆç®—ã‚¢ãƒ©ãƒ¼ãƒˆã‚’ä½ã‚ã«è¨­å®š
3. ä¸è¦ãªå¤ã„ç”»åƒã‚’å®šæœŸå‰Šé™¤

## ğŸ¯ ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å¾Œã®åˆ©ç‚¹

âœ… **å®Œå…¨ãªãƒ‡ãƒã‚¤ã‚¹é–“åŒæœŸ**  
âœ… **å®¹é‡åˆ¶é™ã®å¤§å¹…ç·©å’Œ**  
âœ… **é«˜ã„ä¿¡é ¼æ€§ã¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**  
âœ… **ç”»åƒã®æ°¸ç¶šä¿å­˜**  
âœ… **è¤‡æ•°ãƒ‡ãƒã‚¤ã‚¹ã§ã®ä¸€è²«ã—ãŸä½“é¨“**

ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å®Œäº†å¾Œã€ã‚¢ãƒ—ãƒªãŒè‡ªå‹•çš„ã«Firebase Storageå„ªå…ˆãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ã‚ã‚Šã€ãƒ‡ãƒã‚¤ã‚¹é–“åŒæœŸãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ï¼
